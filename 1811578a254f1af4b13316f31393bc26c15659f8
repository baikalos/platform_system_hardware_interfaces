{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "47851ac9_a1250fec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2024-08-22T17:01:48Z",
      "side": 1,
      "message": "I\u0027ll let @smoreland@google.com take another look before AIDL-API-Review +1 since he had a few comments.",
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a32f5da_898a95dd",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 83,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-22T17:11:45Z",
      "side": 1,
      "message": "did you run the formatter on this? it should suggest to run aidl-format.sh when you upload",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 83,
        "endChar": 9
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "906f686e_5943c0fd",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 83,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-08-23T07:45:23Z",
      "side": 1,
      "message": "No I did not run it before. done",
      "parentUuid": "0a32f5da_898a95dd",
      "range": {
        "startLine": 83,
        "startChar": 8,
        "endLine": 83,
        "endChar": 9
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "561167fb_824444dd",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 88,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-22T17:11:45Z",
      "side": 1,
      "message": "is the \u0027values\u0027 in here a parallel array with the first?",
      "range": {
        "startLine": 88,
        "startChar": 0,
        "endLine": 88,
        "endChar": 61
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d30c82b_e474b779",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 88,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-08-23T07:45:23Z",
      "side": 1,
      "message": "No, it is not a parrallel array with the first. When a rule will involve this criterion, the value must be one of the values array.",
      "parentUuid": "561167fb_824444dd",
      "range": {
        "startLine": 88,
        "startChar": 0,
        "endLine": 88,
        "endChar": 61
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eea4d438_d02bcffd",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 88,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-28T17:04:51Z",
      "side": 1,
      "message": "I\u0027m not sure I fully understand the relationship between these, how a rule would involve the criterion, and which \u0027values\u0027 array you refer to, since there are multiple (AvailableDevices values OR AvailableDevicesAddresses values). Could you share an example, hopefully in the docs, which includes the fully qualified names of these?\n\nMaybe Mikhail or people directly familiar with audio would understand exactly how this works, so if so, please say so. It might be lack of familiarity with the domain. Thanks!",
      "parentUuid": "4d30c82b_e474b779",
      "range": {
        "startLine": 88,
        "startChar": 0,
        "endLine": 88,
        "endChar": 61
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed7444fe_231fc679",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 88,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2024-08-28T17:57:25Z",
      "side": 1,
      "message": "There is a diagram at the end of go/audio-cap-aidl-external document with relationship between these structures. Maybe we should convert it into ASCII drawing in one of the .aidl files.",
      "parentUuid": "eea4d438_d02bcffd",
      "range": {
        "startLine": 88,
        "startChar": 0,
        "endLine": 88,
        "endChar": 61
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e61a4bb_38d0afd2",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 92,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-22T17:11:45Z",
      "side": 1,
      "message": "is this name here always the same as ForceConfigForUse.forceUse AudioPolicyForceUse field?",
      "range": {
        "startLine": 92,
        "startChar": 33,
        "endLine": 92,
        "endChar": 38
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5f2793f_4ca9963a",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 92,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-08-23T07:45:23Z",
      "side": 1,
      "message": "yes, the MEDIA is the same as forceUse field, for others, forceUseForCommunication --\u003e forceUse is set to AudioPolicyForceUse.COMMUNICATION, and so on.\nIf the name is enougth, would you think we could avoid the forceUse field?",
      "parentUuid": "8e61a4bb_38d0afd2",
      "range": {
        "startLine": 92,
        "startChar": 33,
        "endLine": 92,
        "endChar": 38
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9025180b_d5ed1d59",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 92,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-28T17:04:51Z",
      "side": 1,
      "message": "Can you use it like this, instead of 8 entries here with ForceConfigForUse, just put one entry:\n\n```\nForceConfigForUse forceUse;\n```\n\nThen, if the union is set to forcedUse, you can read ForceConfigForUse.forceUse to understand if it\u0027s communication/media/record/dock, etc...\n\nWe should avoid storing the same information twice - that has to be checked it\u0027s in sync. We should only store it once.",
      "parentUuid": "b5f2793f_4ca9963a",
      "range": {
        "startLine": 92,
        "startChar": 33,
        "endLine": 92,
        "endChar": 38
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3150ab9_64696360",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapCriterionV2.aidl",
        "patchSetId": 24
      },
      "lineNbr": 92,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2024-08-28T17:57:25Z",
      "side": 1,
      "message": "I think what you mean is to use a nested union:\n\n```\nunion ForceUseFor {\n    ForceConfigForUse communication;\n    ForceConfigForUse media;\n    ForceConfigForUse record;\n    ForceConfigForUse dock;\n    ForceConfigForUse system;\n    ForceConfigForUse hdmiSystemAudio;\n    ForceConfigForUse encodedSurround;\n    ForceConfigForUse vibrateRinging;    \n}\nForceUseFor forceUseFor;\n```\n\nSo then you can access the content as `forceUseFor.media`.\n@smoreland@google.com Is that what you mean?\n\n@francois.gaffie@ampere.cars I think I\u0027m missing the reason why we use a separate entry per use (these 8 entries) because `ForceConfigForUse` already has a field \n`AudioPolicyForceUse forceUse` which specifies the use. Could you please clarify?",
      "parentUuid": "9025180b_d5ed1d59",
      "range": {
        "startLine": 92,
        "startChar": 33,
        "endLine": 92,
        "endChar": 38
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a555fc3_a08c06e2",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapRule.aidl",
        "patchSetId": 24
      },
      "lineNbr": 57,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-22T17:11:45Z",
      "side": 1,
      "message": "nit: you might prefer INVALID values to be \u00270\u0027 since this is the default in some contexts",
      "range": {
        "startLine": 57,
        "startChar": 18,
        "endLine": 57,
        "endChar": 20
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77c8a5ac_dd5122bf",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapRule.aidl",
        "patchSetId": 24
      },
      "lineNbr": 57,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-08-23T07:45:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6a555fc3_a08c06e2",
      "range": {
        "startLine": 57,
        "startChar": 18,
        "endLine": 57,
        "endChar": 20
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f3d9ec9_65e643e5",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapRule.aidl",
        "patchSetId": 24
      },
      "lineNbr": 116,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2024-08-22T17:11:45Z",
      "side": 1,
      "message": "if both of these are specified, how does that interact with the CompoundRule?",
      "range": {
        "startLine": 109,
        "startChar": 0,
        "endLine": 116,
        "endChar": 34
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4345959_d2dee2eb",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapRule.aidl",
        "patchSetId": 24
      },
      "lineNbr": 116,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-08-23T07:45:23Z",
      "side": 1,
      "message": "Compoound rule will apply to all criterionRules AND the nested rules:\nex:\n\nALL\n    CriterionRule1\n    CriterionRule2\n    CriterionRule3\n    AudioHalCapRule1\n    AudioHalCapRule2\n    \nIs the example in the header not clear enougth ? (I will improve it if not)",
      "parentUuid": "3f3d9ec9_65e643e5",
      "range": {
        "startLine": 109,
        "startChar": 0,
        "endLine": 116,
        "endChar": 34
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b7f1ba5_40621f8b",
        "filename": "media/aidl/android/media/audio/common/AudioHalCapRule.aidl",
        "patchSetId": 24
      },
      "lineNbr": 116,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2024-08-28T17:57:25Z",
      "side": 1,
      "message": "@smoreland@google.com Steve, please respond to this, too.",
      "parentUuid": "b4345959_d2dee2eb",
      "range": {
        "startLine": 109,
        "startChar": 0,
        "endLine": 116,
        "endChar": 34
      },
      "revId": "1811578a254f1af4b13316f31393bc26c15659f8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}