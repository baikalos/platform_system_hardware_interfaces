{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "27857d22_d6923a80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1124693
      },
      "writtenOn": "2023-01-24T00:39:03Z",
      "side": 1,
      "message": "It\u0027s also possible for keystore to error out if it fails to store key with RKPD here. https://android.googlesource.com/platform/system/security/+/refs/heads/master/keystore2/src/security_level.rs#621\n\nThis is a very likely scenario though. So maybe we could just fold this case into SYSTEM_ERROR \u003d 4.",
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac8df7f8_3e637950",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1078064
      },
      "writtenOn": "2023-01-24T16:13:18Z",
      "side": 1,
      "message": "Given that we have errors 22, 24 and 25, do we need these two \"generic\" errors ?\n\nSpecifically this transient error - it does not tell the caller _when_ they should re-try. So I\u0027d rather avoid introducing these two.",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 29
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0bcdc626_2c751c26",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-01-24T18:19:43Z",
      "side": 1,
      "message": "There will always be some bucket of errors that indicate \"something bad happened, just try again later\".\n\nNow, this _shouldn\u0027t_ happen, but it could. I don\u0027t know how else to convey this information to the caller.",
      "parentUuid": "ac8df7f8_3e637950",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 29
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfb9c61d_953aaf82",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-01-24T18:47:31Z",
      "side": 1,
      "message": "Also, 23 means \"never retry\". That strikes me as distinct from \"you can retry later\".",
      "parentUuid": "0bcdc626_2c751c26",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 29
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82dbd4af_e531bc0d",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-01-24T19:32:41Z",
      "side": 1,
      "message": "I just realized \"23\" is ambiguous because of renumbering in the iterstions, haha. Specifically \"OUT_OF_KEYS_PERMANENT_ERROR\" means \"don\u0027t retry\".\n\n\"OUT_OF_KEYS_TRANSIENT_ERROR\" means \"something odd happened, maybe it\u0027ll work later\".",
      "parentUuid": "bfb9c61d_953aaf82",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 29
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abe8b183_5d1d0a30",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-01-24T23:46:37Z",
      "side": 1,
      "message": "Thinking about this more... would you prefer just keeping \"OUT_OF_KEYS\" as-is? It\u0027s basically \"unknown error\" for this case.",
      "parentUuid": "82dbd4af_e531bc0d",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 29
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cdf72526_6edc9be8",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1078064
      },
      "writtenOn": "2023-01-26T15:00:04Z",
      "side": 1,
      "message": "We\u0027re in agreement that it\u0027s better do deprecate OUT_OF_KEYS rather than keep it as \"unknown error\" (we treated it as \"temporarily out of keys\").",
      "parentUuid": "abe8b183_5d1d0a30",
      "range": {
        "startLine": 50,
        "startChar": 2,
        "endLine": 50,
        "endChar": 29
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad0431d8_d92a6ff6",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1078064
      },
      "writtenOn": "2023-01-24T16:13:18Z",
      "side": 1,
      "message": "We agreed on the original name in https://android-review.git.corp.google.com/c/platform/system/hardware/interfaces/+/2317849\n\nNot a big deal to change, but we should reconcile reasoning.",
      "range": {
        "startLine": 52,
        "startChar": 2,
        "endLine": 52,
        "endChar": 37
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01f6ba03_71e073af",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-01-24T18:19:43Z",
      "side": 1,
      "message": "The old error didn\u0027t indicate what kind of upgrade was needed. I think it\u0027s important to indicate that a security update is required.\n\nAlso, I had a very slight concern about confusion with the KEY_REQUIRES_UPGRADE response from keymint.",
      "parentUuid": "ad0431d8_d92a6ff6",
      "range": {
        "startLine": 52,
        "startChar": 2,
        "endLine": 52,
        "endChar": 37
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ab5dd31a_1fb21260",
        "filename": "keystore2/aidl/aidl_api/android.system.keystore2/current/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 52,
      "author": {
        "id": 1078064
      },
      "writtenOn": "2023-01-26T15:00:04Z",
      "side": 1,
      "message": "This was intentional that the old error didn\u0027t indicate what kind of upgrade was needed, so we don\u0027t paint ourselves into a corner.\n\nI don\u0027t feel strongly about the name though, more that it\u0027s reflected to the client as \"take the update you have pending\".",
      "parentUuid": "01f6ba03_71e073af",
      "range": {
        "startLine": 52,
        "startChar": 2,
        "endLine": 52,
        "endChar": 37
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ca51204_a3475ef0",
        "filename": "keystore2/aidl/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-01-23T23:15:17Z",
      "side": 1,
      "message": "nit: I might suggest avoiding this, so we don\u0027t forget that it\u0027s actually ambiguous",
      "range": {
        "startLine": 98,
        "startChar": 7,
        "endLine": 99,
        "endChar": 37
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3a5af1cd_9a1ce5f1",
        "filename": "keystore2/aidl/android/system/keystore2/ResponseCode.aidl",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-01-24T18:19:43Z",
      "side": 1,
      "message": "Agreed on ambiguity here... I decided to just keep the old value around, even though it\u0027ll never be returned by keystore.\n\nIn hindsight, I feel like this API should never have been vendor stable.",
      "parentUuid": "1ca51204_a3475ef0",
      "range": {
        "startLine": 98,
        "startChar": 7,
        "endLine": 99,
        "endChar": 37
      },
      "revId": "2fedb6731b45a24afa89cffd10bfc4b4b7a9ae28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}