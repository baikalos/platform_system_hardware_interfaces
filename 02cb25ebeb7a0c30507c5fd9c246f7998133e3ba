{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "147d93da_82513003",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1729155
      },
      "writtenOn": "2020-11-13T20:08:44Z",
      "side": 1,
      "message": "Thank you very much reviewers!",
      "revId": "02cb25ebeb7a0c30507c5fd9c246f7998133e3ba",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "533944fc_1cd3c06b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1096713
      },
      "writtenOn": "2020-11-13T21:34:34Z",
      "side": 1,
      "message": "This appears to fix the P0 b/173200764.\n\nI hope we can land this very soon.  Thanks!",
      "revId": "02cb25ebeb7a0c30507c5fd9c246f7998133e3ba",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2ce8da92_01d62c72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1096713
      },
      "writtenOn": "2020-11-16T15:03:41Z",
      "side": 1,
      "message": "I didn\u0027t look at this code the other day when verifying that it \"fixed\" a P0 regression.\n\nHowever, static analysis has caught what seems likely to be bugs here.\n\nPlease, do not just revert this, as it will reintroduce a P0 issue.\n\nI don\u0027t know what\u0027s going on with this code overall, but presumably we have several problems going on.  It seems like we need way more testing in here.\n\nWhatever we do to resolve this, do _not_ override a failing TreeHugger to submit it.",
      "revId": "02cb25ebeb7a0c30507c5fd9c246f7998133e3ba",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93e73116_21dc4935",
        "filename": "suspend/1.0/default/SuspendControlService.cpp",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1096713
      },
      "writtenOn": "2020-11-16T15:03:41Z",
      "side": 1,
      "message": "This seems unlikely to be doing what we intend.  See https://en.cppreference.com/w/cpp/algorithm/remove for details, or just locally try this test program:\n\n  #include \u003cvector\u003e\n  #include \u003ccstdio\u003e\n  #include \u003calgorithm\u003e\n  \n  void output(const std::vector\u003cint\u003e \u0026v) {\n    for (int i : v) { printf(\"%d \", i); }\n    printf(\"\\n\");\n  }\n  \n  int main() {\n    std::vector\u003cint\u003e v \u003d { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n    std::vector\u003cint\u003e v2 \u003d v;\n    output(v);\n  \n    std::remove_if(v.begin(), v.end(), [](int i){ return (i % 2) \u003d\u003d 0; });\n    output(v);\n  \n    v2.erase(std::remove_if(v2.begin(), v2.end(),\n                            [](int i){ return (i % 2) \u003d\u003d 0; }),\n             v2.end());\n    output(v2);\n    return 0;\n  }\n\nThat outputs:\n\n  1 2 3 4 5 6 7 8 9 \n  1 3 5 7 9 6 7 8 9 \n  1 3 5 7 9 \n\n\nWhen we just call remove_if() (like we do for \u0027v\u0027), it std::move()s things around in the container, but it does not erase them.  Even worse, since they\u0027re std::move()d, the objects at the end of the list are post-move() and not valid.\n\nWe likely intended to erase() as well, like we do for \u0027v2\u0027 in this example.",
      "range": {
        "startLine": 90,
        "startChar": 0,
        "endLine": 92,
        "endChar": 7
      },
      "revId": "02cb25ebeb7a0c30507c5fd9c246f7998133e3ba",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc5d84b0_59e1876b",
        "filename": "suspend/1.0/default/SuspendControlService.cpp",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1096713
      },
      "writtenOn": "2020-11-16T15:03:41Z",
      "side": 1,
      "message": "Again, unlikely what we intended.",
      "range": {
        "startLine": 98,
        "startChar": 0,
        "endLine": 100,
        "endChar": 95
      },
      "revId": "02cb25ebeb7a0c30507c5fd9c246f7998133e3ba",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}