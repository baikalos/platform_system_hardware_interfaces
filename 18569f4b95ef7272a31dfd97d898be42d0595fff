{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a3637e71_3446a989",
        "filename": "keystore2/aidl/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-05-03T22:07:33Z",
      "side": 1,
      "message": "I actually don\u0027t like these defaults for interfaces that `import` other interfaces.\n\nIt becomes more difficult to bump this `shared_libs` if the next `keystore2` version imports a new version of `keymint`. (which we can see in the build failures)\n\nI\u0027d either include the keymint lib along with the keystore lib here, or just remove the default since it likely doesn\u0027t really make less work.",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 11
      },
      "revId": "18569f4b95ef7272a31dfd97d898be42d0595fff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c608fe6d_b5be6700",
        "filename": "keystore2/aidl/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1944405
      },
      "writtenOn": "2023-05-03T22:56:54Z",
      "side": 1,
      "message": "There\u0027s a few places that use keystore and specify V1, V3, etc.\nAssigning a default benefits in not having to go around the codebase whenever a new version releases, so I like more the idea of having a default.\n\nWould there be another way of achieving this `default` option?\n\nAs for keymint, since keystore2 needs it, isn\u0027t it better to import a default keymint version in the default for keystore2 (As done in this PS)?\n\nIf ever keystore2 would need an older version of keymint, then that can be specified in 1 area and again without having to go around the codebase.",
      "parentUuid": "a3637e71_3446a989",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 11
      },
      "revId": "18569f4b95ef7272a31dfd97d898be42d0595fff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd58e4db_86e630c6",
        "filename": "keystore2/aidl/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-05-03T23:23:41Z",
      "side": 1,
      "message": "\u003e As for keymint, since keystore2 needs it, isn\u0027t it better to import a default keymint version in the default for keystore2 (As done in this PS)?\n\nNot necessarily, because we only care which version of keymint keystore2 imports. It doesn\u0027t need to bump its import just because there is a new version of keymint. Ideally those are the same, but they don\u0027t need to be. Adding a default to a default like this will force it to happen. Maybe the team would want that, maybe they want to develop these separately.\n\n\u003e If ever keystore2 would need an older version of keymint, then that can be specified in 1 area and again without having to go around the codebase.\n\nYeah, this is the ideal case if everyone was using only this single default and not including keymint explicitly. But any module can include a specific version of keymint and then require changes in order to update the defaults.\n\n\nHaving a widely used default like this also forces all of the modules using this default to be able to handle the upgrade right then. Adding a method to a callback in this interface will force us to go around and update all of the users to implement this new callback before we could submit the interface change.",
      "parentUuid": "c608fe6d_b5be6700",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 11
      },
      "revId": "18569f4b95ef7272a31dfd97d898be42d0595fff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d0e26999_43f69d7b",
        "filename": "keystore2/aidl/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1644679
      },
      "writtenOn": "2023-05-04T20:52:08Z",
      "side": 1,
      "message": "Since the security team already has the keymint defaults, I\u0027m guessing they are ok with this. @sethmo@google.com can be the one to +2",
      "parentUuid": "bd58e4db_86e630c6",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 11
      },
      "revId": "18569f4b95ef7272a31dfd97d898be42d0595fff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "09e03cae_b21962de",
        "filename": "keystore2/aidl/Android.bp",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1833664
      },
      "writtenOn": "2023-05-04T21:22:35Z",
      "side": 1,
      "message": "We found that the defaults for keymint made it much easier to update. Things that pull in the keymint AIDL interfaces often ended up needing to all upgrade at once anyway due to how the deps work out. So the keymint defaults solved a very real maintenance pain point for our team.\n\nI\u0027m a little less sure about upgrading the keystore2 NDK AIDL library. I believe very few things are depending on this library, and there\u0027s not really a great reason (that I can see) to force them to all upgrade at the same time.\n\nPlus, AFAICT, the current patch is insufficient? Looks like we still have a bunch of mismatched deps.",
      "parentUuid": "d0e26999_43f69d7b",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 11
      },
      "revId": "18569f4b95ef7272a31dfd97d898be42d0595fff",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}